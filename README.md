# Storage Provider 构造函数

---

本文档目前有汉语、英语、日语三种语言可供查阅

- 汉语文档：本文件
- 英语文档：[英语文档](./document/ReadMe.en.md)
- 日语文档：[日语文档](./document/ReadMe.jp.md)

---

## 简介

*Storage Provider 构造函数* 提供了一个用于存储和获取数据的方法库。

该构造函数具有以下方法：

| 所属 | 方法 |
| --- | --- |
| 设置 或 获取 | `Storage(key, value)` |
| 设置 | `Save(key, value)` |
| 设置 | `SaveMany(arr)` |
| 设置 | `Set(...arg)` |
| 获取 | `Get(key)` |
| 获取 | `GetMany(arr)` |
| 获取 | `GetAll()` |
| 删除 | `Delete(key)` |
| 删除 | `Remove(key)` |
| 删除 | `RemoveMany(arr)` |
| 删除 | `Clean()` |

该存储构造函数提供了一些方便的方式来管理和操作存储的数据，使得开发人员可以轻松地存储和获取各种类型的数据。无论是在会话级别还是在本地级别，开发人员都可以使用该类方法来满足其数据存储需求。

---

---

## 更新日志

详见[更新日志](./document/updataLog/log.md)

---

---

## 如何进行引入和配置函数

本方法需要使用 JavaScript 中的 import 进行引入。
v0.1.1 及以前版本暂不支持直接使用 html 的 script 标签进行引入。

**引入示例代码如下**

```js
import { StorageProvider, $Storage } from "StorageProvider.js";
```

发行版名称可能与本文档提供的名称不一致，按照正确的路径、名称引入即可。

使用 `StorageProvider` 的时候，必须使用 `new` 来进行调用，该构造函数须要传入指定字符串来进行初始化配置，可选内容为 `"local"` 或者是 `"session"` 两个字符串来进行初始化。两个字符串对应的初始化方法分别为 `localStorage` 及 `sessionStorage` ，之后便可按照本文档中写明的相关方法进行使用。

使用 `$Storage` 的时候，默认配置为 `"local"` ，直接使用本文档中写明的相关方法即可。

**使用示例代码如下**

```js
// 使用 StorageProvider 来使用方法
import { StorageProvider } from "StorageProvider.js";

const $Storage = new StorageProvider("local");

$Storage.Save("arg", "hello"); // 此处所用方法仅为示例，请根据实际需要来使用对应方法
```

```js
// 使用 $Storage 来使用方法
import { $Storage } from "StorageProvider.js";

$Storage.Save("arg", "hello"); // 此处所用方法仅为示例，请根据实际需要来使用对应方法
```

---

---

## 说明

近乎所有的方法都会出现的抛出异常缘由：

**key** :

- `key` 不为 `string` 类型
- `key` 为空字符串

**arr** :

- 输入参数不为数组
- 数组内部无有效数据
- 数组内部数据存在非字符串
- 数组中的元素不是对象
- 对象中不包含 `key` 和 `value` 属性

具体的原因请查看实际报错的内容。
基于如上缘由，所有声明的方法中，将不再写明上述报错。

---

---

## 存储及获取内容的方法

### 1. `Storage`

#### 作用

设置或获取单条存储数据

#### 参数

| 参数 | 必选 | 类型 | 说明 |
| --- | --- | --- | --- |
| key | ture | string | 数据的键名 |
| value | false | any | 要存储的值 |

#### 返回值

| 类型 | 说明 |
| --- | --- |
| void | 如果 value 有效，则存储值，无返回值 |
| any | 如果 value 无效，则返回存储的值 |

---

---

## 存储内容的方法

### 1. `Save`

#### 作用

设置单条存储数据

#### 参数

| 参数 | 必选 | 类型 | 说明 |
| --- | --- | --- | --- |
| key | ture | string | 数据的键名 |
| value | true | any | 要存储的值 |

#### 返回值

无

#### 抛出异常缘由

- value 无效

---

### 2. `SaveMany`

#### 作用

设置多条存储数据

#### 参数

| 参数 | 必选 | 类型 | 说明 |
| --- | --- | --- | --- |
| arr | ture | array | 要存储的多条数据，数组中的每个元素都必须是包含 `key` 和 `value` 属性的对象 |

#### 返回值

无

---

### 3. `Set`

#### 作用

设置单条或多条存储数据

#### 参数

| 参数 | 必选 | 类型 | 说明 |
| --- | --- | --- | --- |
| arg | ture | any | 要存储的单条或多条存储数据 |

##### 特别说明

- 本方法传入参数数量必须为 1 ~ 2 个
- 本方法传入参数的原则如下：
    1. 仅传入一个参数的情况下：
        - 参数为对象：
            - 对象的格式为 { key: value }
            - 对象中不能存在无效值
            - 对象不得为空
            - 对象中可以存在多个键值对
            - 对象的属性键即为存储的 key
            - 对象的属性值即为存储的 value
        - 参数为数组：
            - 数组不得为空
            - 数组中的元素内容必须为对象
            - 数组中的元素内容对象格式为 { key: "string", value: any }
            - 数组中不得包含其他类型的元素
    2. 传入参数数量为 2 的情况下：
        - 两个参数均须要有效
        - 第一个参数必须为字符串
        - 第二个参数类型可以是任意
        - 第一个参数将被解析为 key
        - 第二个参数将被解析为 value

#### 返回值

无

---

---

## 获取内容的方法

### 1. `Get`

#### 作用

获取单条存储数据

#### 参数

| 参数 | 必选 | 类型 | 说明 |
| --- | --- | --- | --- |
| key | ture | string | 数据的键名 |

#### 返回值

返回获取到的键名对应的值，值的类型为 any 。

---

### 2. `GetMany`

#### 作用

从存储中获取多个键对应的值

#### 参数

| 参数 | 必选 | 类型 | 说明 |
| --- | --- | --- | --- |
| arr | ture | array | 包含需要获取值的键的数组 |

#### 返回值

包含键值对的对象数组
格式示例： `[{key1: value1}, {key2: value2}, ...]` 。

---

### 3. `GetAll`

#### 作用

从存储中获取多个键对应的值

#### 参数

无

#### 返回值

包含所有本地存储数据的对象
格式示例： `{key1: value1, key2: value2, ...}` 。

---

---

## 删除存储数据的方法

### 1、`Delete`

#### 作用

删除存储数据

#### 参数

| 参数 | 必选 | 类型 | 说明 |
| --- | --- | --- | --- |
| key | false | string | 要删除的数据的键名 |

#### 返回值

无

---

### 2、`Remove`

#### 作用

删除单条存储数据

#### 参数

| 参数 | 必选 | 类型 | 说明 |
| --- | --- | --- | --- |
| key | true | string | 要删除的数据的键名 |

#### 返回值

无

---

### 3、`RemoveMany`

#### 作用

删除多条存储数据

#### 参数

| 参数 | 必选 | 类型 | 说明 |
| --- | --- | --- | --- |
| arr | true | array | 包含需要删除的键的数组，数组内部内容的格式必须为 `string` |

#### 返回值

无

---

### 4、`Clean`

#### 作用

删除存储的所有数据

#### 参数

无

#### 返回值

无

---

---